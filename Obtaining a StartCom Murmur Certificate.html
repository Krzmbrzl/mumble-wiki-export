<p><img src="Deprecated" title="Deprecated" alt="Deprecated" /></p>

<p><img src="Iconbox begin" title="type=warning" alt="type=warning" /><br />
'''IMPORTANT''': Please <a href="Obtaining a Let's Encrypt Murmur Certificate">use Let's Encrypt</a> instead. StartCom [https://en.wikipedia.org/wiki/StartCom#Trustworthiness has lost trust] as a Certificate Authority and will cease operation on 2018-01-01; more information is available [https://groups.google.com/forum/#!msg/mozilla.dev.security.policy/LM1SpKHJ-oc/ReT-B5lgAQAJ here].</p>

<p>Apart from the missing trust, the free certificates [https://en.wikipedia.org/wiki/StartCom#Limitations_of_StartSSL_Unlimited_Free_Certificates are limited], and a revocation (should it become necessary) will cost money.<br />
<img src="Iconbox end" title="Iconbox end" alt="Iconbox end" /></p>

<p>{{Notice</p>
<table>
<tr>
	<td>message='''IMPORTANT CAVEAT''': Level 1 StartCom certificates (ie, the kind you don't pay money for) do not have the TLS bit set in their certificates, which will prevent your Murmur from registering itself as a public server. If you want your server listed in the public server list (shown in the connect dialog for everyone).</td>
</tr>
</table>

<p>There are only three solutions:</p>
<ol>
	<li>Go back to using an automatically-generated, self-signed Murmur certificate.</li>
	<li>Paying for [http://forum.startcom.org/viewtopic.php?f=15&amp;t=1769 Class 2 validation which will have the TLS bit enabled].</li>
	<li>Paying for a certificate from an alternate certificate provider. :(}}</li>
</ol>
<h2>Creating Key and CSR</h2>
<p>This is a quick hands-on guide for obtaining and installing a Class 1 server certificate in murmur <br />
on a reasonably modern Linux system.</p>

<p>First of all, we need to generate a key and a signing request. It doesn't matter what you input for country, state etc as it will all get replaced by the CA.</p>

<p> $ openssl req -nodes -newkey rsa:2048 -nodes -keyout mumble.key -out server_mumble.csr <br />
 Generating a 2048 bit RSA private key<br />
 .........................................+++<br />
 ..+++<br />
 writing new private key to 'mumble.key'<br />
 <small>-</small><br />
 You are about to be asked to enter information that will be incorporated<br />
 into your certificate request.<br />
 What you are about to enter is what is called a Distinguished Name or a DN.<br />
 There are quite a few fields but you can leave some blank<br />
 For some fields there will be a default value,<br />
 If you enter '.', the field will be left blank.<br />
 <small>-</small><br />
 Country Name (2 letter code) [GB]:<br />
 State or Province Name (full name) [Berkshire]:<br />
 Locality Name (eg, city) [Newbury]:<br />
 Organization Name (eg, company) [My Company Ltd]:<br />
 Organizational Unit Name (eg, section) []: <br />
 Common Name (eg, your name or your server's hostname) []:<br />
 Email Address []:<br />
 Please enter the following 'extra' attributes<br />
 to be sent with your certificate request <br />
 A challenge password []:<br />
 An optional company name []:</p>

<p>This will create server_mumble.csr. </p>

<h2>Getting the Certificate signed</h2>

<p>After authenticating to the StartSSL website (assuming you've already added your domain to StartSSL and verified it), click "Certificates Wizard", select "Web Server SSL/TLS Certificate" from the Certificate Target dropdown box, and click "Continue".</p>

<p>Skip the key generation step because we've already generated a key using OpenSSL above. You will now have a text area were you can paste the contents of server_mumble.csr. Paste the contents of server_mumble.csr and click "Continue".</p>

<h2>Putting it into Murmur</h2>

<p>After the certificate is generated the contents of the textarea should be placed in a new file, ssl_mumble.crt.</p>

<p> wget --no-check-certificate <a href="https://www.startssl.com/certs/sub.class1.server.ca.pem">https://www.startssl.com/certs/sub.class1.server.ca.pem</a><br />
 cat sub.class1.server.ca.pem &gt; ssl_mumble_concat.crt<br />
 cat ssl_mumble.crt &gt;&gt; ssl_mumble_concat.crt</p>

<p>The sub.class1.server.ca.pem and ssl_mumble.crt files can now safely be deleted as they are unused:</p>

<p> rm sub.class1.server.ca.pem ssl_mumble.crt</p>

<p>Now the file ssl_mumble_concat.crt contains the certificate, and mumble.key contains the key. Move the files into the same folder as <a href="murmur.ini">murmur.ini</a> and edit the following two lines:</p>

<p> sslCert=ssl_mumble_concat.crt<br />
 sslKey=mumble.key</p>

<p>Restart murmur and you're done.</p>

<p>If you've previously ran murmur, it will have autogenerated certificates and stored these in it's internal configuration database, which takes precedence over the .ini file. To remove these, add the ''-wipessl'' parameter to murmur when starting it.</p>

<p>If you've followed the above instructions, but murmur reports "Failed to find certificate matching private key" on startup, your system certificates are possibly outdated. Debian 5.0 Lenny is affected by this. To solve this issue, add the StartCom Certificate Authority certificate to the certificates file by running the next command in the directory containing ssl_mumble_concat.crt:</p>

<p> wget --no-check-certificate <a href="http://www.startssl.com/certs/ca.pem">http://www.startssl.com/certs/ca.pem</a><br />
 cat ca.pem &gt;&gt; ssl_mumble_concat.crt<br />
 rm ca.pem</p>

<p><a href="Category:Documentation English">Category:Documentation English</a></p>